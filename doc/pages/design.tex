\chapter{System design} \label{des}
\section{Introduction}
This chapter defines aim of the project and specifies potential users of the application. Secondly, it breaks down requirements that were set for this project into separate sections - functional, non-functional, hardware, software and quality -  where they are described in detail. Next, the project of the system is presented by UML and classes diagrams. Finally, the most important libraries used for document classification framework are defined.

\section{Aim of the project}
TODO

Main aim of this project is to develop platform for automated text document classification. Proposed solution will be capable of classificating text documents with a focus on parallel execution of algorithms. Classificator will implement a dual-layer model. In first layer a k-Nearest-Neighbors [\ref{soa-knn}] algorithm will be used for a general decision narrowing the set of possible membership classes. More detailed and precise classification decision will be made by second layer with Support Vector Machine [\ref{soa-svm}] algorithm.

The application will be created with the intent of providing a complete set of tools for text document classification and documenting usability of various machine learning algorithms. This includes:
\begin{itemize}
	\item \textbf{feature extraction} - creating feature vectors for text documents, methods for reducing vectors dimensionality,
	\item \textbf{clusterization} - finding groups of similar documents that would define clusters,
	\item \textbf{classification} - defining position of new documents in cluster space and finding its best matching group membership
	\item \textbf{algorithms performance tests and results} - all algorithms will be tested with various parameters and the results will be described.
\end{itemize}

Final solution should also indicate how complex is the computation part and how crucial it is to design a system that supports executing tasks in parallel, distributes workloads in efficient manner between available worker processes and makes a proper use of all available resources.

The project may become a useful tool not only as a base framework for data scientists, but also for writers whom it should aid assigning a proper label to the document.

\section{Potential users}
TODO
\label{users}

The application will be dedicated mainly to 

On the other hand users who ........ will also be able to use this tool to 


\section{System requirements}
TODO
In this section requirements for

\subsection{General requirements}
TODO

\begin{enumerate}

\item \textbf{Business context} The program will be available online, so everyone will be able to use it. The application sharing with a remote access will make it very useful in the context of:

\begin{enumerate}

\item 

\item 

\end{enumerate}

Furthermore 

\item \textbf{Prospectiveness}

Created application can be used as a module of a larger system that.... 

In future it can be expanded with ....... This fact indicates the prospectiveness of a proposed system. 

\end{enumerate}

\subsection{Functional requirements}
TODO
Diagram presented in the figure \ref{functional} shows general functional requirements available in the application. The aim of the diagram is to describe possible interactions between actors and functions offered by the application. Each oval shows a single use case within which different flows called scenarios may occur. Every use case characterizes possible system functionalities and defines steps that lead to the effect observable by the actor. A dependency marked as \textbf{extend} describes some additional behavior, which in some cases may be included into the base use case. 
The base use case is the one which is pointed by the arrowhead of the connection. The extend use case continues the behavior of the base use case by inserting additional actions into the base sequence when the appropriate extension point is reached in the base use case and the extension condition is filled. An \textbf{include} dependency is a relationship which describes the inclusion of another use case responsible for different behavior. The including dependency is the one pointed by the arrowhead of the connection.


To present more detailed interactions, use cases from following categories were extended and shown on separate diagrams.

 
Descriptions of all of the use cases including their initial, alternative and results were collected in the table \ref{tab:tableusecase}.
\vspace{5em}

< tutaj tabelka>
    
\subsection{Non functional requirements}
TODO
\textbf{Quality requirements}


\textbf{Ergonomy}
\label{interfaceerg}


\textbf{Restrictive requirements}

A user of the application, will have to have basic skills of 


In order to use the application the following software and hardware requirements will have to be filled.

\subsection{Hardware and software requirements}
In this section software and hardware requirements are described.

\subsubsection{Hardware requirements}
This application was tested on various hardware configuration and has proven to work reliable on even older machines. Although the following configuration is not a server-grade hardware, it allows to execute flow of the application without running out of available resources in most of the presented test cases. Consider it as a recommended minimal configuration.
\begin{itemize}
	\item Processor - recomended is at least a quad-core processor. Usage of technologies like Intel's HyperThreading is not advised and the number of spawned child processes should not exceed the number of physical cores. Application relies heavily on reads and writes to shared memory, thus limiting use of virtual cores (\cite{performance_ht}). Processor used during tests was an Intel i7 with 4 physical cores and 8 logical processors.
	\item System memory - has the greatest impact on performance of the application. The more memory, the less caching mechanisms will be used. Caching uses hard drives as a backend for storing processed documents, which greatly affects overall performance and execution time. Machine with 16 GB DDR3 memory was used during tests.
	\item Hard drives - speed of reads and writes to hard drives is a crucial factor during startup of application and in case of using cache. SSD drive should be considered in place of standard hard drive due to higher speeds of reads and writes and O(1) latency of access \cite{performance_hdd_ssd}. A SSD drive connected to PCI-e slot was used during tests.
\end{itemize}


\subsubsection{Software requirements}
There are no specified requirements about the operating system installed on the device. Application should run on every modern operating system, being it either Linux, OS X or Windows. Tests were run on both Linux and OS X machines, however the Windows environment was never fully tested and thus is not recommended for running the application.

Taking software requirements into consideration, a Python interpreter must be installed on a machine along with a set of libraries. Python is an interpreted language that provides good performance, scalability features and possibility of adapting software on-the-fly without a need to recompile the code. All required libraries are listed in both section \ref{design-libraries} and in source code in \textit{source/requirements3.txt} file.
 
 
\section{Project of a system} \label{project}
This section provides the project of the described solution for......

 The project was presented by the diagrams employed in UML (Unified Modeling Language), a standard notation for the modeling of real-world objects and systems. 
 
\subsection{Activity diagram of the performing test flow}
The activity diagram shows the logic of workflows of step-wise actions. Rectangles with rounded corners present sequences of activities. A rhombus represents a decision after which it is possible to choose one of the alternatives. A diagram in the figure \ref{activity} shows a sequence of actions needed to ......

........ is a starting point, ....... is a final point. 


\subsection{Sequence diagram of processing frames}
TODO



\subsection{Diagram of classes}
TODO
A diagram of classes (figure \ref{classes})is one of the most popular UML diagrams. Rectangles show classes, their attributes and methods. Association connections were used to present relations between entities. Classes communicates with each other by sending messages (by association connections) and as a result they are able to fill tasks presented on the dynamic diagrams, for example use case model \ref{tab:tableusecase}.

 
  

\subsection{Architecture}
TODO
The whole application will be based on ....... model. It is a distributed application structure that partitions tasks between the ..........


The main idea of this model is presented in the figure \ref{client}.
 
 
 
 
\subsection{Libraries} \label{design-libraries}
This project was designed to be portable across different platforms and to have minimal dependencies. It uses Python platform and libraries that are freely available via pip, the Python package installer.

Platform dependencies that must be installed by user:
\begin{itemize}
	\item \textbf{Python 3.5.1} - the Python language interpreter.
	\item\textbf{pip 8.1.2} - Python package installer.
\end{itemize}

Used libraries that available in default Python 3.5 installation and thus do not require additional steps to install:
\begin{itemize}
	\item \textbf{multiprocessing} - used for parallelisation mechanisms. Contains basic shared memory data structeres and allows for usage of processes. Processes were chosen over threads because they are not blocked by Python's Global Interpreter Lock (GIL) and allow to execute tasks in parallel not only localy, but also over network.
	\item \textbf{xml.sax} - used to access XML files using streams. Allows to open files that are to big to fit in memory.
\end{itemize}

External Python libraries that can be installed using pip:
\begin{itemize}
	\item \textbf{nltk 3.2.1} - Natural Language ToolKit - is used for word stemming thanks to build-in WordNet
	\item \textbf{SQLAlchemy 1.0.14} - library used for database queries. It is optional, as this project uses database as a cache only when requested by user. By default a sqlite database is used as a backend because it does not have any additional requirements and is very portable. While its performance may suffer as it does not offer any database management system, it is not the problem in project's implementation.
\end{itemize}


\subsection{Application release}
Presented solution was developed as an open-source application under GPLv2 license and is freely available to everyone. Its both source code and documentation are available online at \href{https://github.com/macsz/parallel-wiki-classifier}{git repository\footnote{https://github.com/macsz/parallel-wiki-classifier} hosted on GitHub}.


\section{Conclusion}
TODO
This chapter includes a complete description of the methodology used to prepare analysis of the requirements for the created application. The proposed algorithm takes advantage of the possibilities of new technologies to .......

Moreover the project of the system was also described and presented taking into consideration all of the specified requirements.